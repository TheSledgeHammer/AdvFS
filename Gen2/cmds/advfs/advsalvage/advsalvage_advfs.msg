$ =======================================================================
$   (c) Copyright Hewlett-Packard Development Company, L.P., 2008
$
$   This program is free software: you can redistribute it and/or modify
$   it under the terms of version 2 the GNU General Public License as
$   published by the Free Software Foundation.
$   
$   This program is distributed in the hope that it will be useful,
$   but WITHOUT ANY WARRANTY; without even the implied warranty of
$   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
$   GNU General Public License for more details.
$   
$   You should have received a copy of the GNU General Public License
$   along with this program.  If not, see <http://www.gnu.org/licenses/>.
$
$ =======================================================================

$
$ Copyright (c) 2002-2004 Hewlett-Packard Development Company, L.P.
$
$ Advanced File System On-disk structure Salvager
$

$quote "

$set S_SALVAGE_1
SALVAGE_1	"usage: %s [-V] [-x|-p] [-l] [-S] [-v num] [-d time] [-D dir] [-L path] [-o option] [-U format [-u archive]] {-s special [-s special]... | fsname} [snap_id [path]]\n"
SALVAGE_2	"Permission denied - must be a privileged user to run\n"
SALVAGE_3	"setrlimit() failed - Unable to change memory usage limits\n"
SALVAGE_4	"Verbose flag outside of valid range\n"
SALVAGE_5	"stat() failed on '%s'\n"
SALVAGE_6	"/advsalvage.log"
SALVAGE_7	"yes"
SALVAGE_8	"y"
SALVAGE_9	"no"
SALVAGE_10	"n"
SALVAGE_11	"ask"
SALVAGE_12	"Invalid parameter for option '-o'\n"
SALVAGE_13	"Too many volumes selected - '%s' puts us over the limit\n"
SALVAGE_14	"stat() failed for volume '%s'\n"
SALVAGE_15	"Volume '%s' is not a block device\n"
SALVAGE_16	"The fsCookie value %f requested is prior to the year 1980.\n"
SALVAGE_17	"Tag Softlimit flag outside of valid range\n"
SALVAGE_18	"A duplicate flag was used\n"
SALVAGE_19	"The flags x and p can not be used together\n"
SALVAGE_20	"Too many arguments on the command line\n"
SALVAGE_21	"Missing fsname\n"
SALVAGE_22	"Not able to determine which volumes are in '%s'\n"
SALVAGE_23	"No valid volumes found\n"
SALVAGE_24	"Cannot change directory to '%s'\n"
SALVAGE_25	"Cannot open log file '%s'\n"
SALVAGE_26	"About to recover '%s'\n"
SALVAGE_27	"Snapshot (or file system) to be recovered '%s'\n"
SALVAGE_28	"Path to be recovered '%s'\n"
SALVAGE_29	"Volume(s) to be used "
SALVAGE_30	"Files will be restored to '%s'\n"
SALVAGE_31	"Logfile will be placed in '%s'\n"
SALVAGE_32	"Could not read root tag from '%s'\n"
SALVAGE_33	"Starting file system/snapshot search method:\n"
SALVAGE_34	"Starting search of '%s'\n"
SALVAGE_35	"Failed search of '%s'\n"
SALVAGE_36	"Skipping search of '%s'\n"
SALVAGE_37	"Nothing found using file system/snapshot search method\n"
SALVAGE_38	"Starting volume search method:\n"
SALVAGE_39	"Starting search of volume '%s'\n"
SALVAGE_40	"Failed search of volume '%s'\n"
SALVAGE_41	"Starting sequential search method:\n"
SALVAGE_42	"Starting sequential search of volume '%s'\n"
SALVAGE_43	"Failed on sequential search of volume '%s'\n"
SALVAGE_44	"Starting file name loading:\n"
SALVAGE_45	"Loading file names from '%s'\n"
SALVAGE_46	"Unable to name files from '%s'\n"
SALVAGE_47	"File(s) in requested pathname '%s' not found\n"
SALVAGE_48	"Unable to validate '%s'\n"
SALVAGE_49	"Starting file system/snapshot recovery:\n"
SALVAGE_50	"Starting recovery of '%s'\n"
SALVAGE_51	"Recovery of '%s' by specific pathname not possible. %s\n%s%s"
SALVAGE_52	" may still be recoverable in its entirety. If this is desired,\n"
SALVAGE_53	" reissue command without the specific pathname option.\n"
SALVAGE_54	"Setting search by volume - setup_tag_2 failed\n"
SALVAGE_55	"Corrupt tag page %ld in '%s', skipping it\n"
SALVAGE_56	"Setting search by volume\n"
SALVAGE_57	"Setting search by volume - error in mcell\n"
SALVAGE_58	"Setting search by volume - Partial\n"
SALVAGE_59	"calloc() failed\n"
SALVAGE_60	"Skipping current page, read failed\n"
SALVAGE_61	"Unable to process a valid page\n"
SALVAGE_62	"%s : Cannot convert BMT volume %d page %ld to lbn\n"
SALVAGE_63	"Cannot convert BMT page to lbn - Invalid\n"
SALVAGE_64	"Failed to create tag %ld in '%s'\n"
SALVAGE_65	"Failed to add extent to tag %ld in '%s'\n"
SALVAGE_67	"Attributes record corrupt for tag %ld in '%s'\n"
SALVAGE_68	"malloc() failed\n"
SALVAGE_70	"%s tag %ld - size does not match %d != %d\n"
SALVAGE_71	"Setting search by volume - More\n"
SALVAGE_72	"Found an invalid record type - %d\n"
SALVAGE_73	"find_next_mcell() failed\n"
SALVAGE_74	"load_tag_from_mcell:next mcell tag.tag_seq %ld.%x != %ld.%x\n"
SALVAGE_75	"Failed to create tag array element %ld of %ld\n"
SALVAGE_76	"p2_load_tag_from_mcell tag %ld has smaller seq num: %x < %x\n"
SALVAGE_77	"p2_load_tag_from_mcell tag %ld has larger seq num: %x > %x\n"
SALVAGE_78	"Too many ACLs found for tag %ld\n"
SALVAGE_79	"%s : %ld : ACLs not restored\n"
SALVAGE_80	"ACLs not restored for file '%s'\n"
SALVAGE_84	"Attribute data corrupt on tag %ld in '%s'\n"
SALVAGE_86	"Broken mcell chain - returning PARTIAL\n"
SALVAGE_87	"'%s' is a snapshot\n"
SALVAGE_88	"'%s' has a snapshot\n"
SALVAGE_89	"Setting search by volume - no file system/snapshot name\n"
SALVAGE_90	"Storage domain ID does not match attribute record - continuing to process\n"
SALVAGE_91	"First Xtnt is not head of chain\n"
SALVAGE_92	"Setting search by volume - invalid primary mcell\n"
SALVAGE_97	"extent data for tag %ld greater than expected\n"
SALVAGE_98	"Recovery by specific tag number not possible. File system/snapshot may\n"
SALVAGE_99	"    still be recoverable in its entirety. If this is desired,\n"
SALVAGE_100	"    reissue command without the specific tag number option.\n"
SALVAGE_101	"Error reading directory tag %ld, for target tag %ld (%s).\n"
SALVAGE_102	"Target tag's hierarchy partially restored in lost+found. Additional\n"
SALVAGE_103	"    files, other than those requested, may also be restored.\n"
SALVAGE_104	"Tag number %ld outside valid range, file system/snapshot '%s'\n"
SALVAGE_105	"Cannot find tag %ld, file system/snapshot '%s'\n"
SALVAGE_106	"Failed to get complete parent tag data for tag %ld, file system/snapshot '%s'\n"
SALVAGE_107	"Failed to get parent tag data for tag %ld, file system/snapshot '%s'\n"
SALVAGE_108	"Tag %ld incorrect filetype, in target tag %ld hierarchy,\n"
SALVAGE_109	"    file system/snapshot '%s'\n"
SALVAGE_110	"load_tag_from_mcell() failed\n"
SALVAGE_111	"Cannot convert page %ld to lbn, file system/snapshot '%s'\n"
SALVAGE_112	"Tag %ld is not in use, file system/snapshot '%s'\n"
SALVAGE_113	"Cleaning up memory structures:\n"
SALVAGE_114	"Cleaning up memory structures for '%s'\n"
SALVAGE_118	"Naming file sytem/snapshot tag %ld to '%s'\n"
SALVAGE_119	"Skipping fileset '%s'\n"
SALVAGE_120	"Found a reference to a new file system/snapshot tag %ld\n"
SALVAGE_121	"Trying to increase the size of '%s' tag array from %ld to %ld\n"
SALVAGE_122	"realloc() failed; Old size %ld New size %ld\n"
SALVAGE_123	"Setting tag %ld parent to MISSING\n"
SALVAGE_124	"Error occurred reading directory %s, file system/snapshot '%s'\n"
SALVAGE_125	"Requested files not found: %s\n"
SALVAGE_126	"File %s's tag %ld is larger than arraySize %ld\n"
SALVAGE_127	"Corrupt page in directory %s, tag %ld, file system/snapshot '%s'\n"
SALVAGE_128	"Corrupt directory page, tag %ld, file system/snapshot '%s'\n"
SALVAGE_129	"Filename corruption in tag %ld, file system/snapshot '%s'\n"
SALVAGE_130	"tag_"
SALVAGE_131	"Unable to read page 0 of RBMT for volume '%s'\n"
SALVAGE_133	"Unable to read page 0 of BMT for volume '%s'\n"
SALVAGE_134	"Setting search by volume - Partial BMT0\n"
SALVAGE_135	"Unable to read storage domain attributes from volume '%s'\n"
SALVAGE_136	"Unable to find volume id for volume '%s'\n"
SALVAGE_137	"Two volumes, %s and %s, have the same volume ID %d.\n"
SALVAGE_138	"Setting volume '%s' to volume id %d\n"
SALVAGE_140	"Attempting to locate volume id for '%s'\n"
SALVAGE_141	"Unable to find a unique volume id for volume '%s'\n"
SALVAGE_142	"Please enter a unique volume id. [1 - %d]? "
SALVAGE_143	"Another volume has the same volume ID.\n"
SALVAGE_145	"Setting search by volume - Failure on num tags\n"
SALVAGE_146	"Partial on find num tags : %ld %ld\n"
SALVAGE_147	"Setting search by volume - fileset tag extents\n"
SALVAGE_149	"Tag page header corrupt\n"
SALVAGE_150	"mcell corrupt\n"
SALVAGE_151	"load_tag_from_mcell failed %d\n"
SALVAGE_152	".lost+found"
SALVAGE_154	"pNode does not exist.\n"
SALVAGE_155	"fileset_settag_%ld"
SALVAGE_156	"Corrupt extent - Vol %d LBN %ld - Skipping\n"
SALVAGE_158	"Cannot convert BMT vol %d page %ld to lbn\n"
SALVAGE_159	"Broken mcell chain in file system/snapshot '%s'\n"
SALVAGE_160	"No tag fobs found\n"
SALVAGE_161	"Broken mcell chain - root tag file\n"
SALVAGE_162	"Invalid volume ID %d\n"
SALVAGE_163	"Volume ID %d not in use\n"
SALVAGE_164	"Page %ld is out of bounds. Valid range 0 to %ld\n"
SALVAGE_165	"Mcell chain %d,%d,%d points to itself\n"
SALVAGE_166	"Attempting to locate storage domain cookie\n"
SALVAGE_167	"\n    Recovery quotas for '%s':\n"
SALVAGE_168	"Hard block limit = %lu, soft block limit = %lu\n"
SALVAGE_169	"Hard file limit = %lu, soft file limit = %lu\n"
SALVAGE_170	"Could not complete recovery of file system/snapshot\n"
SALVAGE_171	"Could not complete recovery of file system/snapshot '%s'\n"
SALVAGE_172	"Recovery of '%s'completed, check log and error files\n"
SALVAGE_173	"%lu files processed, including %lu directories\n"
SALVAGE_174	"%lu successfully recovered, %lu partially recovered\n"
SALVAGE_175	"%lu recovered larger, %lu unrecovered\n"
SALVAGE_176	"%lu had no attributes.\n"
SALVAGE_177	"%s : %ld : hardlink not created\n"
SALVAGE_178	"Hardlink '%s' not created\n"
SALVAGE_179	"%s : %ld : hardlink created\n"
SALVAGE_180	"Hardlink '%s' created\n"
SALVAGE_181	"%s: %ld : file was not overwritten\n"
SALVAGE_182	"File '%s' was not overwritten\n"
SALVAGE_183	"%s : %ld : could not be overwritten\n"
SALVAGE_184	"File '%s' could not be overwritten\n"
SALVAGE_185	"%s : %ld : could not be restored\n"
SALVAGE_186	"File '%s' could not be restored\n"
SALVAGE_187	"%s : %ld : successfully restored\n"
SALVAGE_188	"File '%s' was successfully restored\n"
SALVAGE_189	"File '%s' was partially restored\n"
SALVAGE_190	"%lu files lost ACLs during pax archive output.\n"
SALVAGE_192	"No room to create file '%s'\n"
SALVAGE_193	"Add more space to file system and continue or abort\n"
SALVAGE_194	"%s: %ld : Error setting file attributes\n"
SALVAGE_195	"Error setting attributes for file '%s'\n"
SALVAGE_196	"%s: %ld : No attributes found for directory\n"
SALVAGE_197	"No attributes found for file '%s'\n"
SALVAGE_198	"Out of memory processing file '%s'\n"
SALVAGE_199	".partial"
SALVAGE_200	"No room to rename file '%s'\n"
SALVAGE_203	"%s : %ld : Error setting file attributes\n"
SALVAGE_204	"%s: %ld : attributes were not found\n"
SALVAGE_205	"Attributes not found for file '%s'\n"
SALVAGE_206	"%s: %ld : partially recovered\n"
SALVAGE_207	"      missing bytes %lu to %lu\n"
SALVAGE_208	"No more disk space for file recovery\n"
SALVAGE_209	"%s: cannot restore uid/gid\n"
SALVAGE_210	"%s: cannot restore file permissions\n"
SALVAGE_211	"%s: cannot restore file atime/mtime\n"
SALVAGE_214	"%s: %ld : symlink has no name to link to\n"
SALVAGE_215	"%s: %ld : cannot set uid/gid for symlink\n"
SALVAGE_216	"Error restoring attributes for file '%s'\n"
SALVAGE_217	"%s: %ld : no attributes for symlink\n"
SALVAGE_218	"%s: %ld : No attributes available for file\n"
SALVAGE_219	"%s: %ld :cannot reset directory atime/mtime\n"
SALVAGE_220	"Parent of node to be removed does not exist.\n"
SALVAGE_221	"File system/snapshot tree does not exist\n"
SALVAGE_222	"Parent of tag %ld is tag %ld, which is not a directory\n"
SALVAGE_223	"Name in tree node for tag %ld is null\n"
SALVAGE_224	"Missing first instance node for tag in file system/snapshot '%s'\n"
SALVAGE_225	"Corrupt data for tag %ld - too many hard links found\n"
SALVAGE_226	"Missing hard links for tag %ld\n"
SALVAGE_227	"tag_%ld"
SALVAGE_228	"fsname is NULL\n"
SALVAGE_229	"fsname '%s' is too long\n"
SALVAGE_230	"Opening storage directory '%s'\n"
SALVAGE_231	"Invalid fsname '%s'\n"
SALVAGE_233	"readlink() failed on '%s'\n"
SALVAGE_235	"Greater than %d volumes found\n"
SALVAGE_236	"open() failed for Device '%s'\n"
SALVAGE_237	"'%s' does not have an AdvFS magic number\n"
SALVAGE_238	"Failure to read the superblock\n"
SALVAGE_239	"lseek() failed\n"
SALVAGE_240	"read() failed\n"
SALVAGE_241	"Did not read all bytes. %d of %d at LBN %d\n"
SALVAGE_242	"Date given is in the future\n"
SALVAGE_243	"Entered a date prior to Epoch\n"
SALVAGE_244	"mktime() failed\n"
SALVAGE_245	"'%s' not restored; file already exists\n"
SALVAGE_246	"'%s' already exists; overwrite? "
SALVAGE_247	"Do you want to abort? (yes or no) "
SALVAGE_248	"Current soft-limit on tag array %d; increase size to %d? "
SALVAGE_249	"No BMT extents found\n"
SALVAGE_250     "Detected ODS version (%d.%d) may be higher than this version supports.\n"
SALVAGE_251	"Recover directory path '%s' is too long\n"
SALVAGE_252	"Recover log path '%s%s' is too long\n"
SALVAGE_253	"Recover log path '%s' is too long\n"
SALVAGE_254	"Parent does not know of its children nodes.\n"
SALVAGE_255	"Node exists, but tag array entry %ld is invalid.  Deleting node.\n"
SALVAGE_256	"Archive name '%s' is too long\n"
SALVAGE_257	"Files will be archived to stdout in TAR format\n"
SALVAGE_258	"Files will be archived to '%s' in TAR format\n"
SALVAGE_259	"Invalid output format '%s'\n"
SALVAGE_260	"The u flag requires the U flag to be used\n"
SALVAGE_261	"Vdump output format is not yet supported.\n"
SALVAGE_262	"Invalid output format '%d'.\n"
SALVAGE_263	"NULL buffer passed into output_tar_data.\n"
SALVAGE_264	"predicted %ld bytes in file, only wrote %ld bytes.  Zero-filling %d bytes at end.\n"
SALVAGE_265     "Located storage domain fsCookie: %ld,%ld\n"
SALVAGE_266     "Unable to determine the cookie number of the storage domain.\n"
SALVAGE_267	"Path too long for file %s to add '.partial', using original name.\n"
SALVAGE_268	"RBMT next cell points to %d instead of the last mcell.  Using last mcell instead.\n"
SALVAGE_270	"Unable to create archive file.  Exiting.\n"
SALVAGE_271	"Message to be printed is too long, truncating it.\n"
SALVAGE_272	"Cannot allocate %ld bytes.\n"
SALVAGE_273	"Check for other processes (besides %s) which are\n"
SALVAGE_274	"using large amounts of memory, and kill them if\n"
SALVAGE_275	"possible, or increase swap space.\n"
SALVAGE_276	"If neither of those options are available, you may need\n"
SALVAGE_277	"to increase system settings which limit memory usage.\n"
SALVAGE_278	"Located storage domain version: %d.%d\n"
SALVAGE_279	"Closing volume %s and not salvaging anything from it.\n"
$
$ NOTE the progress status messages end in \r not \n.
$
SALVAGE_280     "Checking tag %ld out of a maximum of %ld, on '%s'.\r"
SALVAGE_281     "Checking mcell %d out of %d, on volume %s.\r"
SALVAGE_282     "Searching page %ld on volume %s.\r"
SALVAGE_283     "Processing file %ld out of %ld, on file system/snapshot '%s'.\r"
SALVAGE_284     "Recovering file %ld out of %ld.\r"

SALVAGE_285	"Volume '%s' is too corrupt to salvage data from it\n"
SALVAGE_286	"normally.  %s with the '-S' (sequential mode) flag\n"
SALVAGE_287	"might be able to retrieve some data from this volume.\n"
SALVAGE_288	"%s : %ld : path too long to restore to tar archive\n"
SALVAGE_289	"File '%s' has a path too long to restore to tar archive\n"
SALVAGE_290	"read %d bytes does not end on block boundary\n"
SALVAGE_291     "%s version %s\n"
SALVAGE_292     "The flags s and Q can not be used together\n"

SALVAGE_293     "\nDo you want %s to try this allocation again? ([y]/n)  "
SALVAGE_294     "Quick test path '%s' is not a directory\n"
SALVAGE_295     "Quick test path '%s' is too long\n"
SALVAGE_296     "Tag %ld is a directory and cannot be hardlinked.\n"

SALVAGE_298     "Illegal time value '%s'\n"
